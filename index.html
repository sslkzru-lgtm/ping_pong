<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>–ü–∏–Ω–≥-–ü–æ–Ω–≥ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: #1a1a1a;
            font-family: 'Arial', sans-serif;
            touch-action: none;
            position: relative;
            height: 100vh;
        }
        
        #gameCanvas {
            display: block;
            background: linear-gradient(to bottom, #0a0a2a, #1a1a4a);
            width: 100%;
            height: 100%;
        }
        
        #scoreDisplay {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            z-index: 10;
            font-family: 'Orbitron', sans-serif;
        }
        
        #controlsHint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            text-align: center;
            z-index: 10;
            background: rgba(0, 0, 30, 0.7);
            padding: 8px 15px;
            border-radius: 20px;
            font-family: 'Arial', sans-serif;
        }
        
        #startScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 42, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            text-align: center;
            padding: 20px;
        }
        
        #gameTitle {
            color: #4da6ff;
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(77, 166, 255, 0.8);
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
        }
        
        #startButton {
            background: linear-gradient(to bottom, #4da6ff, #1a5fbf);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.8rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 20px;
            box-shadow: 0 0 20px rgba(77, 166, 255, 0.6);
            transition: all 0.3s;
            font-family: 'Arial', sans-serif;
            font-weight: bold;
            letter-spacing: 1px;
        }
        
        #startButton:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(77, 166, 255, 0.8);
        }
        
        #gameDescription {
            color: #aaa;
            font-size: 1.2rem;
            max-width: 80%;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        #instructions {
            background: rgba(20, 20, 60, 0.8);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            color: #ddd;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .controlMethod {
            margin: 10px 0;
            font-weight: bold;
        }
        
        #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 42, 0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            text-align: center;
            padding: 20px;
        }
        
        #winnerText {
            color: #ffd700;
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
            font-family: 'Orbitron', sans-serif;
        }
        
        #finalScore {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 30px;
            font-family: 'Orbitron', sans-serif;
        }
        
        #restartButton {
            background: linear-gradient(to bottom, #ff6b6b, #c43e3e);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 15px;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.6);
            transition: all 0.3s;
            font-family: 'Arial', sans-serif;
            font-weight: bold;
        }
        
        .touchIndicator {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(77, 166, 255, 0.3);
            pointer-events: none;
            transform: translate(-50%, -50%);
            z-index: 5;
            display: none;
            border: 2px solid rgba(100, 180, 255, 0.7);
            box-shadow: 0 0 10px rgba(100, 180, 255, 0.5);
        }
        
        @media (max-height: 700px) {
            #gameTitle {
                font-size: 2.8rem;
            }
            #startButton {
                padding: 15px 40px;
                font-size: 1.5rem;
            }
            #gameDescription {
                font-size: 1rem;
            }
            #controlsHint {
                font-size: 1rem;
                bottom: 10px;
            }
        }
        
        @media (max-width: 400px) {
            #gameTitle {
                font-size: 2.5rem;
            }
            #scoreDisplay {
                font-size: 2rem;
            }
            #controlsHint {
                font-size: 0.9rem;
                padding: 6px 12px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="scoreDisplay">0 : 0</div>
    <div id="controlsHint">
        <span class="controlMethod">üì± –°–µ–Ω—Å–æ—Ä: –∫–∞—Å–∞–π—Ç–µ—Å—å –≤—ã—à–µ/–Ω–∏–∂–µ —Ä–∞–∫–µ—Ç–∫–∏ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è</span>
        <span class="controlMethod">üñ±Ô∏è –ú—ã—à—å: –∑–∞–∂–º–∏—Ç–µ –∏ –¥–≤–∏–≥–∞–π—Ç–µ –∫—É—Ä—Å–æ—Ä–æ–º</span>
    </div>
    <div class="touchIndicator" id="touchIndicator"></div>
    
    <div id="startScreen">
        <h1 id="gameTitle">PING PONG</h1>
        <div id="gameDescription">
            –°–æ—Ä–µ–≤–Ω—É–π—Å—è —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º –º–∞—Ç—á–µ –ø–∏–Ω–≥-–ø–æ–Ω–≥–∞!
        </div>
        <div id="instructions">
            <p><span class="controlMethod">üì± –ù–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ:</span> –ö–∞—Å–∞–π—Ç–µ—Å—å —ç–∫—Ä–∞–Ω–∞ –≤—ã—à–µ —Ä–∞–∫–µ—Ç–∫–∏ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –≤–≤–µ—Ä—Ö, –Ω–∏–∂–µ - –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –≤–Ω–∏–∑</p>
            <p><span class="controlMethod">üñ±Ô∏è –ù–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:</span> –ó–∞–∂–º–∏—Ç–µ –ª–µ–≤—É—é –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –∏ –¥–≤–∏–≥–∞–π—Ç–µ –∫—É—Ä—Å–æ—Ä–æ–º</p>
        </div>
        <button id="startButton">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
    </div>
    
    <div id="gameOverScreen">
        <h2 id="winnerText">–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
        <div id="finalScore">0 : 0</div>
        <button id="restartButton">–ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const controlsHint = document.getElementById('controlsHint');
        const startScreen = document.getElementById('startScreen');
        const startButton = document.getElementById('startButton');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const winnerText = document.getElementById('winnerText');
        const finalScore = document.getElementById('finalScore');
        const restartButton = document.getElementById('restartButton');
        const touchIndicator = document.getElementById('touchIndicator');
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        let paddleWidth, paddleHeight, ballSize;
        let maxPlayerSpeed;
        let playerY, aiY, ballX, ballY;
        let ballSpeedX, ballSpeedY;
        let aiSpeed;
        
        // –°—Ç–∞—Ç—É—Å—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        let isTouchActive = false;
        let touchStartY = 0;
        let touchCurrentY = 0;
        let isMouseDown = false;
        let mouseY = 0;
        let lastTouchTime = 0;
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let gameRunning = false;
        let playerScore = 0;
        let aiScore = 0;
        const WINNING_SCORE = 7;
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ–¥ –Ω–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä
            paddleWidth = canvas.width * 0.012;
            paddleHeight = canvas.height * 0.15;
            ballSize = canvas.width * 0.02;
            maxPlayerSpeed = canvas.height * 0.01;
            aiSpeed = canvas.height * 0.008;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
            resetPositions();
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–π
        function resetPositions() {
            playerY = canvas.height / 2 - paddleHeight / 2;
            aiY = canvas.height / 2 - paddleHeight / 2;
            ballX = canvas.width / 2 - ballSize / 2;
            ballY = canvas.height / 2 - ballSize / 2;
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–∞—Å–∞–Ω–∏–π
        canvas.addEventListener('touchstart', handleTouchStart, { passive: false });
        canvas.addEventListener('touchmove', handleTouchMove, { passive: false });
        canvas.addEventListener('touchend', handleTouchEnd, { passive: false });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º—ã—à–∏
        canvas.addEventListener('mousedown', handleMouseDown);
        canvas.addEventListener('mousemove', handleMouseMove);
        canvas.addEventListener('mouseup', handleMouseUp);
        canvas.addEventListener('mouseleave', handleMouseUp);
        
        function handleTouchStart(e) {
            e.preventDefault();
            const now = Date.now();
            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –±—ã—Å—Ç—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–∞—Å–∞–Ω–∏—è
            if (now - lastTouchTime < 100) return;
            lastTouchTime = now;
            
            touchStartY = e.touches[0].clientY;
            touchCurrentY = touchStartY;
            isTouchActive = true;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞—Å–∞–Ω–∏—è
            showTouchIndicator(e.touches[0].clientX, e.touches[0].clientY);
        }
        
        function handleTouchMove(e) {
            e.preventDefault();
            if (gameRunning && isTouchActive) {
                touchCurrentY = e.touches[0].clientY;
                showTouchIndicator(e.touches[0].clientX, e.touches[0].clientY);
            }
        }
        
        function handleTouchEnd(e) {
            e.preventDefault();
            isTouchActive = false;
            touchStartY = 0;
            touchCurrentY = 0;
            hideTouchIndicator();
        }
        
        function handleMouseDown(e) {
            if (!gameRunning) return;
            e.preventDefault();
            isMouseDown = true;
            mouseY = e.clientY;
        }
        
        function handleMouseMove(e) {
            if (gameRunning) {
                mouseY = e.clientY;
                if (isMouseDown) {
                    showTouchIndicator(e.clientX, e.clientY);
                }
            }
        }
        
        function handleMouseUp(e) {
            isMouseDown = false;
            hideTouchIndicator();
        }
        
        function showTouchIndicator(x, y) {
            touchIndicator.style.display = 'block';
            touchIndicator.style.left = `${x}px`;
            touchIndicator.style.top = `${y}px`;
        }
        
        function hideTouchIndicator() {
            touchIndicator.style.display = 'none';
        }
        
        // –õ–æ–≥–∏–∫–∞ –ò–ò
        function updateAI() {
            const aiCenter = aiY + paddleHeight / 2;
            const ballCenter = ballY + ballSize / 2;
            const distance = Math.abs(aiCenter - ballCenter);
            
            // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (0.5 - –ª–µ–≥–∫–∏–π, 1.0 - —Å–ª–æ–∂–Ω—ã–π)
            const difficulty = 0.75;
            let adjustedSpeed = aiSpeed * difficulty;
            
            // –ò–ò —Å–ª–µ–¥—É–µ—Ç –∑–∞ –º—è—á–æ–º —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
            if (aiCenter < ballCenter - 15) {
                aiY += adjustedSpeed;
            } else if (aiCenter > ballCenter + 15) {
                aiY -= adjustedSpeed;
            }
            
            // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: –ò–ò –∏–≥—Ä–∞–µ—Ç –ª—É—á—à–µ, –∫–æ–≥–¥–∞ –æ—Ç—Å—Ç–∞–µ—Ç
            if (aiScore < playerScore) {
                adjustedSpeed *= 1.3;
            }
            
            // –ì—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ò–ò
            aiY = Math.max(0, Math.min(canvas.height - paddleHeight, aiY));
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞ —Å –Ω–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
        function updatePlayer() {
            let velocity = 0;
            const paddleCenterY = playerY + paddleHeight / 2;
            const deadZone = paddleHeight * 0.25; // –ó–æ–Ω–∞ –≤–æ–∫—Ä—É–≥ —Ä–∞–∫–µ—Ç–∫–∏, –≥–¥–µ –æ–Ω–∞ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è
            
            // –õ–æ–≥–∏–∫–∞ –¥–ª—è —Å–µ–Ω—Å–æ—Ä–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            if (isTouchActive) {
                if (touchCurrentY < paddleCenterY - deadZone) {
                    velocity = -maxPlayerSpeed;
                } else if (touchCurrentY > paddleCenterY + deadZone) {
                    velocity = maxPlayerSpeed;
                }
            } 
            // –õ–æ–≥–∏–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—ã—à—å—é
            else if (isMouseDown) {
                if (mouseY < paddleCenterY - deadZone) {
                    velocity = -maxPlayerSpeed;
                } else if (mouseY > paddleCenterY + deadZone) {
                    velocity = maxPlayerSpeed;
                }
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
            playerY += velocity;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —Ä–∞–∫–µ—Ç–∫–∏
            playerY = Math.max(0, Math.min(canvas.height - paddleHeight, playerY));
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º—è—á–∞
        function updateBall() {
            ballX += ballSpeedX;
            ballY += ballSpeedY;
            
            // –û—Ç—Å–∫–æ–∫ –æ—Ç –≤–µ—Ä—Ö–Ω–µ–π –∏ –Ω–∏–∂–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü
            if (ballY <= 0 || ballY + ballSize >= canvas.height) {
                ballSpeedY = -ballSpeedY;
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –º—è—á –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞–ª –≤ —Å—Ç–µ–Ω–µ
                ballY = ballY <= 0 ? 0 : canvas.height - ballSize;
            }
            
            // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —Ä–∞–∫–µ—Ç–∫–æ–π –∏–≥—Ä–æ–∫–∞
            if (ballX <= paddleWidth && 
                ballY + ballSize > playerY && 
                ballY < playerY + paddleHeight) {
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É–≥–æ–ª –æ—Ç—Å–∫–æ–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Å—Ç–∞ —É–¥–∞—Ä–∞
                const hitPosition = (ballY + ballSize/2) - (playerY + paddleHeight/2);
                const normalizedHit = hitPosition / (paddleHeight/2);
                const maxAngle = Math.PI/4; // 45 –≥—Ä–∞–¥—É—Å–æ–≤
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏ —É–¥–∞—Ä–µ
                ballSpeedX = Math.abs(ballSpeedX) * (1 + Math.abs(normalizedHit) * 0.1) * 1.05;
                ballSpeedY = normalizedHit * maxAngle * Math.abs(ballSpeedX) * 1.2;
                
                // –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç—Å–∫–æ–∫–∞ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ —Ä–∞–∫–µ—Ç–∫–∏
                if (Math.abs(normalizedHit) < 0.2) {
                    ballSpeedX *= 0.9; // –£–º–µ–Ω—å—à–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º —É–¥–∞—Ä–µ
                }
            }
            
            // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —Ä–∞–∫–µ—Ç–∫–æ–π –ò–ò
            if (ballX + ballSize >= canvas.width - paddleWidth && 
                ballY + ballSize > aiY && 
                ballY < aiY + paddleHeight) {
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É–≥–æ–ª –æ—Ç—Å–∫–æ–∫–∞
                const hitPosition = (ballY + ballSize/2) - (aiY + paddleHeight/2);
                const normalizedHit = hitPosition / (paddleHeight/2);
                const maxAngle = Math.PI/4;
                
                ballSpeedX = -Math.abs(ballSpeedX) * (1 + Math.abs(normalizedHit) * 0.1) * 1.05;
                ballSpeedY = normalizedHit * maxAngle * Math.abs(ballSpeedX) * 1.2;
                
                if (Math.abs(normalizedHit) < 0.2) {
                    ballSpeedX *= 0.9;
                }
            }
            
            // –ó–∞–±–∏—Ç—ã–π –≥–æ–ª
            if (ballX < -ballSize) {
                aiScore++;
                updateScore();
                resetBall();
            } else if (ballX > canvas.width) {
                playerScore++;
                updateScore();
                resetBall();
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–∫–æ–Ω—á–∞–Ω–∏–µ –∏–≥—Ä—ã
            if (playerScore >= WINNING_SCORE || aiScore >= WINNING_SCORE) {
                endGame();
            }
        }
        
        function updateScore() {
            scoreDisplay.textContent = `${playerScore} : ${aiScore}`;
        }
        
        function resetBall() {
            ballX = canvas.width / 2 - ballSize / 2;
            ballY = canvas.height / 2 - ballSize / 2;
            
            // –°–ª—É—á–∞–π–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
            const playerLeading = playerScore > aiScore;
            const aiLeading = aiScore > playerScore;
            
            if (playerLeading) {
                ballSpeedX = -Math.abs(canvas.width * 0.005);
            } else if (aiLeading) {
                ballSpeedX = Math.abs(canvas.width * 0.005);
            } else {
                ballSpeedX = (Math.random() > 0.5 ? 1 : -1) * Math.abs(canvas.width * 0.005);
            }
            
            ballSpeedY = (Math.random() > 0.5 ? 1 : -1) * Math.abs(canvas.height * 0.003);
        }
        
        function endGame() {
            gameRunning = false;
            finalScore.textContent = `${playerScore} : ${aiScore}`;
            
            if (playerScore > aiScore) {
                winnerText.textContent = "–í–´ –ü–û–ë–ï–î–ò–õ–ò!";
                winnerText.style.color = "#4dff4d";
                winnerText.style.textShadow = "0 0 15px rgba(77, 255, 77, 0.8)";
            } else {
                winnerText.textContent = "–ü–û–ë–ï–î–ò–õ –ò–ò!";
                winnerText.style.color = "#ff4d4d";
                winnerText.style.textShadow = "0 0 15px rgba(255, 77, 77, 0.8)";
            }
            
            gameOverScreen.style.display = "flex";
        }
        
        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function draw() {
            // –û—á–∏—Å—Ç–∫–∞ canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞
            ctx.setLineDash([10, 15]);
            ctx.strokeStyle = "rgba(255, 255, 255, 0.3)";
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // –†–∞–∫–µ—Ç–∫–∞ –∏–≥—Ä–æ–∫–∞ (—Å–ª–µ–≤–∞)
            const playerGradient = ctx.createLinearGradient(0, playerY, 0, playerY + paddleHeight);
            playerGradient.addColorStop(0, "#6ab0ff");
            playerGradient.addColorStop(0.5, "#4da6ff");
            playerGradient.addColorStop(1, "#2a80d9");
            ctx.fillStyle = playerGradient;
            
            // –≠—Ñ—Ñ–µ–∫—Ç –¥–≤–∏–∂–µ–Ω–∏—è —Ä–∞–∫–µ—Ç–∫–∏
            ctx.shadowBlur = 10;
            ctx.shadowColor = "rgba(77, 166, 255, 0.6)";
            ctx.fillRect(0, playerY, paddleWidth, paddleHeight);
            ctx.shadowBlur = 0;
            
            // –†–∞–∫–µ—Ç–∫–∞ –ò–ò (—Å–ø—Ä–∞–≤–∞)
            const aiGradient = ctx.createLinearGradient(0, aiY, 0, aiY + paddleHeight);
            aiGradient.addColorStop(0, "#ff8a8a");
            aiGradient.addColorStop(0.5, "#ff6b6b");
            aiGradient.addColorStop(1, "#d94a4a");
            ctx.fillStyle = aiGradient;
            
            ctx.shadowBlur = 10;
            ctx.shadowColor = "rgba(255, 107, 107, 0.6)";
            ctx.fillRect(canvas.width - paddleWidth, aiY, paddleWidth, paddleHeight);
            ctx.shadowBlur = 0;
            
            // –ú—è—á
            const ballGradient = ctx.createRadialGradient(
                ballX + ballSize/2, ballY + ballSize/2, 1,
                ballX + ballSize/2, ballY + ballSize/2, ballSize/2
            );
            ballGradient.addColorStop(0, "#ffffff");
            ballGradient.addColorStop(0.7, "#aaeeff");
            ballGradient.addColorStop(1, "#4da6ff");
            
            ctx.fillStyle = ballGradient;
            ctx.beginPath();
            ctx.arc(ballX + ballSize/2, ballY + ballSize/2, ballSize/2, 0, Math.PI * 2);
            ctx.fill();
            
            // –°–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –º—è—á–∞
            ctx.shadowBlur = 15;
            ctx.shadowColor = "rgba(77, 166, 255, 0.7)";
            ctx.beginPath();
            ctx.arc(ballX + ballSize/2, ballY + ballSize/2, ballSize/2 + 2, 0, Math.PI * 2);
            ctx.stroke();
            ctx.shadowBlur = 0;
            
            // –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            drawStars();
        }
        
        // –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∑–≤–µ–∑–¥—ã –Ω–∞ —Ñ–æ–Ω–µ
        const stars = [];
        function initStars() {
            stars.length = 0;
            const starCount = Math.floor(canvas.width * canvas.height / 5000);
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 0.5 + 0.1,
                    opacity: Math.random() * 0.5 + 0.3
                });
            }
        }
        
        function drawStars() {
            ctx.fillStyle = "white";
            for (let star of stars) {
                ctx.globalAlpha = star.opacity + Math.sin(Date.now() * 0.001 * star.speed) * 0.2;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
                
                // –î–≤–∏–∂–µ–Ω–∏–µ –∑–≤–µ–∑–¥ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞
                star.y += star.speed * 0.5;
                if (star.y > canvas.height) {
                    star.y = 0;
                    star.x = Math.random() * canvas.width;
                }
            }
            ctx.globalAlpha = 1.0;
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            if (!gameRunning) return;
            
            updatePlayer();
            updateAI();
            updateBall();
            draw();
            
            requestAnimationFrame(gameLoop);
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        startButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);
        
        function startGame() {
            startScreen.style.display = "none";
            gameOverScreen.style.display = "none";
            
            // –°–±—Ä–æ—Å —Å—á–µ—Ç–∞ –∏ –ø–æ–∑–∏—Ü–∏–π
            playerScore = 0;
            aiScore = 0;
            updateScore();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤–µ–∑–¥
            initStars();
            
            // –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–π
            resetPositions();
            resetBall();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ —Å —É—á–µ—Ç–æ–º —Ç–µ–∫—É—â–µ–≥–æ –æ–∫–Ω–∞
            resizeCanvas();
            
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
            gameRunning = true;
            gameLoop();
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            initStars();
            draw(); // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –¥–ª—è —Ñ–æ–Ω–∞
        });
    </script>
</body>
</html>